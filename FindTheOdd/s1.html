<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Cómic Pensamiento Crítico</title>
    <script src="phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var game = new Phaser.Game(800, 600, Phaser.CANVAS, 'phaser-example', { preload: preload, create: create, update: update, render: render});

var ill;
var left;
var right;
var voice;
var voice_button;

var b_a;
var b_b;
var b_c;

var b_a_bool=false;
var b_b_bool=false;
var b_c_bool=false;
var c_a=null;
var c_b=null;
var c_c=null;
var ya;
var yb;
var yc;

function preload() {
    game.load.audio('voice', 'assets/s1.mp3');
    game.load.image('ill', 'assets/dialogo2_con_globo.PNG');
    game.load.spritesheet('left', 'assets/arrowleft_2.png',100,100);
    game.load.spritesheet('right', 'assets/arrowright_2.png',100,100);
    game.load.spritesheet('voice_button', 'assets/button_voice3_50.png', 50, 50);
    game.load.spritesheet('b_a', 'assets/b1a_3.png', 300,100);
    game.load.spritesheet('b_b', 'assets/b1b.png', 300,100);
    game.load.spritesheet('b_c', 'assets/b1c_3.png', 300,100);
}
function create() {
    game.stage.backgroundColor = "#FFFFFF";
    ill=game.add.image(110, 0, 'ill');
    // ill.scale.setTo(1.02,1.02);

    voice=game.add.audio('voice');
    voice.play();
    left=game.add.button(20,280, 'left', goLeft, this, 1,0,2);
    right=game.add.button(660,280, 'right', goRight, this, 1,0,2);
    right.visible=false;
    voice_button = game.add.button(360, 520, 'voice_button', play_sound ,this);

    ya=game.world.centerY-100;
    yb=game.world.centerY+12.5;
    yc=game.world.centerY+125;
    b_a = game.add.button(game.world.centerX-15, ya, 'b_a', AnsA ,this, 0);
    b_a.anchor.setTo(0.5);
    b_b = game.add.button(game.world.centerX-15, yb, 'b_b', AnsB ,this, 0);
    b_b.anchor.setTo(0.5);
    b_c = game.add.button(game.world.centerX-15, yc, 'b_c', AnsC ,this, 0);
    b_c.anchor.setTo(0.5);

}
function rep_hist_action()
{
    localStorage.setItem('before', '51');
    window.open("h0.html", "_self");
}
function AnsA(){
    b_a_bool=true;
    b_b_bool=false;
    b_c_bool=false;
}
function AnsB(){
    b_a_bool=false;
    b_b_bool=true;
    b_c_bool=false;
}
function AnsC(){
    b_a_bool=false;
    b_b_bool=false;
    b_c_bool=true;
}

function clearBefore(){
    if(c_a!=null){
        c_a.destroy();
        c_a=null;
    }
    if(c_b!=null){
        c_b.destroy();
        c_b=null;
    }
    if(c_c!=null){
        c_c.destroy();
        c_c=null;
    }
    if(right!=null){
        right.destroy();
        right=null;
    }
}

function play_sound(){
    voice.play();
}
function goRight(){
    if(b_a_bool)
        localStorage.setItem("i2","0");
    else if(b_b_bool)
        localStorage.setItem("i2","1");
    else if(b_c_bool)
        localStorage.setItem("i2","0");

    window.open("context2.html", "_self");
}
function goLeft(){
    if(localStorage.getItem('before_fo')=='1')
      window.open("s0_1.html", "_self");
    else if(localStorage.getItem('before_fo')=='2')
        window.open("s0_2.html", "_self");
    else if(localStorage.getItem('before_fo')=='3')
        window.open("s0_3.html", "_self");
    else if(localStorage.getItem('before_fo')=='4')
        window.open("s0_4.html", "_self");
}
function update(){
    if(b_a_bool)
        b_a.frame=1;
    else
        b_a.frame=0;

    if(b_b_bool)
        b_b.frame=1;
    else
        b_b.frame=0;

    if(b_c_bool)
        b_c.frame=1;
    else
        b_c.frame=0;

    if(b_a_bool || b_b_bool || b_c_bool)
        right.visible=true;

}
function render() {
}
</script>

</body>
</html>
